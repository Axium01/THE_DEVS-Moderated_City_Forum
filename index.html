<!DOCTYPE html>
<html lang="en">
    <head>
        <title>PAGENAME | City Web Forum</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="author" content="The Devs: Sam Getahun, Gabriella Kulondwa, Milo Wearn, Rick Carlin">
        <meta name="description" content=""> 
		<title>Home Page</title>
        <link href="css/style.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <header>
            <h1 class="websiteTitle">Moderated City Forum</h1>
        </header>
        <main>
            <div id="mainPostList"> 
                <!-- Post Template -->
                
                 <div class="postBody"> <!-- Post -->
                    <h1 class="postTitle">Post Title</h1>
                    <p class="postContent">
                        Post Content
                    </p>
                    <div class="postInfo">
                        <p class="postDate">##/##/##</p>
                        <button class="dropDownButton">v</button>
                    </div>
                 </div> <!-- End of Post -->


            <!-- New Post Button (Part of main but shown in footer) -->
             <button id="newPostButton">New Post</button>
        </main>
        <footer>
            <a href="about.html">about</a>
        </footer>
        <script>
            const KEY = 'postKey';

function readPost() {
  try { return JSON.parse(localStorage.getItem(KEY)) || []; }
  catch { return []; }
}

function writePost(post) {
  localStorage.setItem(KEY, JSON.stringify(post));
}

function deletePost() {
  localStorage.removePost(KEY);
  render();
}

//document.getElementById('deletePost').addEventListener('click', deletePost);

function render() {
  const postContainer = document.getElementById('mainPostList');
  const posts = readPost(); // grab post contents

  // html contains ALL of the stuff in the post table
  let html = ``;

  // POST ITEM DISPLAY //
  posts.forEach((item, i) => {
    html += `
        <div class="postBody">
        	<h1 class="postTitle">${item.title}</h1>
            <p class="postContent">${item.content}</p>
            <div class="postInfo">
                <p class="postDate">AAAA</p>
                <button class="dropDownButton">v</button>
            </div>
        </div>`; 
	  
  });
  postContainer.innerHTML = html;
}

function removePost(id) {
  let post = readPost();
  post = post.filter(item => item.id !== id);
  writePost(post);
  render(); // rerender so that it actually changes graphically
}

render();
        </script>
    </body>

</html>





